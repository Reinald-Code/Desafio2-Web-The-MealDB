---
import Layout from '../../layouts/Layout.astro';
import MealCard from '../../components/MealCard.jsx';

// Obtenemos el nombre de la categoría desde la URL (ej: /category/Beef -> category = "Beef")
const { category } = Astro.params;

// Hacemos la llamada a la API para obtener las comidas de esa categoría
const response = await fetch(
  `https://www.themealdb.com/api/json/v1/1/filter.php?c=${category}`
);
const data = await response.json();
const meals = data.meals || []; // Usamos || [] por si no hay resultados
---

<Layout title={`Recetas de ${category}`}>
  <div class="flex items-center mb-6">
    <a href="/" class="bg-orange-500 text-white py-2 px-4 rounded hover:bg-orange-600">
      ← Volver a Inicio
    </a>
    <h1 class="text-3xl font-bold ml-4">Categoría: {category}</h1>
  </div>

  {
    meals.length > 0 ? (
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        {meals.map((meal: any) => (
          <MealCard client:load meal={meal} />
        ))}
      </div>
    ) : (
      <p class="text-center text-gray-500">No se encontraron recetas en esta categoría.</p>
    )
  }
</Layout>