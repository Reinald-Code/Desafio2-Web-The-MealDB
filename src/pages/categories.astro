---
// Importamos el Layout base para mantener la consistencia en la estructura de la pÃ¡gina
import Layout from '../layouts/Layout.astro';

// Realizamos una peticiÃ³n a la API para obtener la lista de todas las categorÃ­as disponibles
const response = await fetch('https://www.themealdb.com/api/json/v1/1/list.php?c=list');
const data = await response.json();
const categories = data.meals;

// Definimos un objeto de traducciÃ³n para mostrar las categorÃ­as en espaÃ±ol
// Esto mejora la experiencia de usuario para audiencia hispanohablante
const categoryTranslations: { [key: string]: string } = {
  'Beef': 'Carne de Res',
  'Chicken': 'Pollo',
  'Dessert': 'Postre',
  'Lamb': 'Cordero',
  'Miscellaneous': 'Varios',
  'Pasta': 'Pasta',
  'Pork': 'Cerdo',
  'Seafood': 'Mariscos',
  'Side': 'Guarniciones',
  'Starter': 'Entrantes',
  'Vegan': 'Vegano',
  'Vegetarian': 'Vegetariano',
  'Breakfast': 'Desayuno',
  'Goat': 'Cabra'
};
---

<!-- Utilizamos el Layout con el tÃ­tulo especÃ­fico para la pÃ¡gina de categorÃ­as -->
<Layout title="CategorÃ­as de Recetas">
  <!-- Contenedor principal con padding y centrado -->
  <div class="px-40 flex flex-1 justify-center py-5">
    <!-- Contenedor del contenido con ancho mÃ¡ximo -->
    <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
      <!-- Encabezado de la pÃ¡gina -->
      <div class="flex flex-wrap justify-between gap-3 p-4">
        <p class="text-[#1b0e0e] tracking-light text-[32px] font-bold leading-tight min-w-72">CategorÃ­as</p>
      </div>
      
      <!-- Grid responsivo de tarjetas de categorÃ­as -->
      <div class="grid grid-cols-[repeat(auto-fit,minmax(158px,1fr))] gap-3 p-4">
        {/* Iteramos sobre cada categorÃ­a para crear su tarjeta */}
        {categories.map((category: { strCategory: string }) => (
          // Enlace a la pÃ¡gina de la categorÃ­a especÃ­fica
          <a 
            href={`/category/${category.strCategory.toLowerCase()}`}
            class="flex flex-1 gap-3 rounded-lg border border-[#e7d0d1] bg-[#fcf8f8] p-4 items-center hover:bg-[#f3e7e8] transition-colors group"
          >
            {/* Contenedor del emoji que representa la categorÃ­a */}
            <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-lg w-10 shrink-0 text-2xl flex items-center justify-center bg-[#f3e7e8]">
              {/* AsignaciÃ³n condicional de emojis segÃºn la categorÃ­a */}
              {category.strCategory === 'Beef' && 'ğŸ¥©'}
              {category.strCategory === 'Chicken' && 'ğŸ—'}
              {category.strCategory === 'Dessert' && 'ğŸ°'}
              {category.strCategory === 'Lamb' && 'ğŸ‘'}
              {category.strCategory === 'Miscellaneous' && 'ğŸ½ï¸'}
              {category.strCategory === 'Pasta' && 'ğŸ'}
              {category.strCategory === 'Pork' && 'ğŸ·'}
              {category.strCategory === 'Seafood' && 'ğŸ¦'}
              {category.strCategory === 'Side' && 'ğŸ¥—'}
              {category.strCategory === 'Starter' && 'ğŸ¥™'}
              {category.strCategory === 'Vegan' && 'ğŸŒ±'}
              {category.strCategory === 'Vegetarian' && 'ğŸ¥¬'}
              {category.strCategory === 'Breakfast' && 'ğŸ³'}
              {category.strCategory === 'Goat' && 'ğŸ'}
              {/* Emoji por defecto para categorÃ­as no listadas */}
              {!['Beef', 'Chicken', 'Dessert', 'Lamb', 'Miscellaneous', 'Pasta', 'Pork', 'Seafood', 'Side', 'Starter', 'Vegan', 'Vegetarian', 'Breakfast', 'Goat'].includes(category.strCategory) && 'ğŸ½ï¸'}
            </div>
            {/* Nombre de la categorÃ­a traducido o en su idioma original */}
            <h2 class="text-[#1b0e0e] text-base font-bold leading-tight group-hover:text-[#994d51] transition-colors">
              {categoryTranslations[category.strCategory] || category.strCategory}
            </h2>
          </a>
        ))}
      </div>
    </div>
  </div>
</Layout>
