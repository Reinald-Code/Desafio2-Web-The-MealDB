---
// Importamos el layout principal que define la estructura de todas las pÃ¡ginas
import Layout from '../layouts/Layout.astro';

// Realizamos una llamada a la API de TheMealDB para obtener todas las Ã¡reas/paÃ­ses disponibles
// Esta API devuelve una lista de todos los paÃ­ses que tienen recetas en la base de datos
const response = await fetch('https://www.themealdb.com/api/json/v1/1/list.php?a=list');

// Convertimos la respuesta en formato JSON para poder trabajar con los datos
const data = await response.json();

// Extraemos el array de paÃ­ses/Ã¡reas de la respuesta de la API
// Cada elemento del array tiene la propiedad 'strArea' con el nombre del paÃ­s en inglÃ©s
const areas = data.meals;

// Creamos un objeto que mapea los nombres de paÃ­ses en inglÃ©s a sus equivalentes en espaÃ±ol
// Esto nos permite mostrar los nombres de los paÃ­ses en nuestro idioma
const countryTranslations: { [key: string]: string } = {
  'American': 'Estadounidense',    // Cocina estadounidense
  'British': 'BritÃ¡nica',          // Cocina del Reino Unido
  'Canadian': 'Canadiense',        // Cocina de CanadÃ¡
  'Chinese': 'China',              // Cocina china
  'Croatian': 'Croacia',           // Cocina croata
  'Dutch': 'Holanda',              // Cocina holandesa
  'Egyptian': 'Egipto',            // Cocina egipcia
  'Filipino': 'Filipinas',         // Cocina filipina
  'French': 'Francia',             // Cocina francesa
  'Greek': 'Grecia',               // Cocina griega
  'Indian': 'India',               // Cocina india
  'Irish': 'Irlanda',              // Cocina irlandesa
  'Italian': 'Italia',             // Cocina italiana
  'Jamaican': 'Jamaica',           // Cocina jamaicana
  'Japanese': 'JapÃ³n',             // Cocina japonesa
  'Kenyan': 'Kenia',               // Cocina keniana
  'Malaysian': 'Malasia',          // Cocina malasia
  'Mexican': 'MÃ©xico',             // Cocina mexicana
  'Moroccan': 'Marruecos',         // Cocina marroquÃ­
  'Polish': 'Polonia',             // Cocina polaca
  'Portuguese': 'Portugal',        // Cocina portuguesa
  'Russian': 'Rusia',              // Cocina rusa
  'Spanish': 'EspaÃ±a',             // Cocina espaÃ±ola
  'Thai': 'Tailandia',             // Cocina tailandesa
  'Tunisian': 'TÃºnez',             // Cocina tunecina
  'Turkish': 'TurquÃ­a',            // Cocina turca
  'Ukrainian': 'Ucrania',          // Cocina ucraniana
  'Uruguayan': 'Uruguay',          // Cocina uruguaya
  'Vietnamese': 'Vietnam'          // Cocina vietnamita
};
---

<!-- Utilizamos el componente Layout para envolver toda la pÃ¡gina -->
<!-- El tÃ­tulo aparecerÃ¡ en la pestaÃ±a del navegador y en los metadatos -->
<Layout title="Cocinas del Mundo - Recetas por PaÃ­s">
  <!-- Contenedor principal con mÃ¡rgenes automÃ¡ticos, padding y estilos responsive -->
  <div class="container mx-auto px-4 py-8">
    <!-- TÃ­tulo principal de la pÃ¡gina -->
    <h1 class="text-4xl font-bold mb-8 text-center text-gray-800">
      Cocinas del Mundo
    </h1>
    <!-- SubtÃ­tulo descriptivo que explica el propÃ³sito de la pÃ¡gina -->
    <p class="text-lg text-gray-600 text-center mb-12">
      Explora las deliciosas recetas tradicionales de diferentes paÃ­ses
    </p>

    <!-- Grid responsive que se adapta a diferentes tamaÃ±os de pantalla -->
    <!-- 1 columna en mÃ³vil, 2 en tablet pequeÃ±o, 3 en tablet, 4 en desktop, 5 en pantallas grandes -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
      {/* Iteramos sobre cada paÃ­s/Ã¡rea obtenido de la API */}
      {areas.map((area: { strArea: string }) => (
        <!-- Cada paÃ­s es un enlace clickeable que lleva a sus recetas especÃ­ficas -->
        <!-- La URL se forma convirtiendo el nombre del paÃ­s a minÃºsculas -->
        <a 
          href={`/country/${area.strArea.toLowerCase()}`}
          class="group bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden border border-gray-200"
        >
          <!-- Contenedor del contenido de cada tarjeta de paÃ­s -->
          <div class="p-6 text-center">
            <!-- SecciÃ³n de banderas usando emojis -->
            <!-- Cada paÃ­s tiene su bandera correspondiente -->
            <div class="text-4xl mb-3">
              {/* Banderas especÃ­ficas para cada paÃ­s */}
              {area.strArea === 'American' && 'ğŸ‡ºğŸ‡¸'}      {/* Estados Unidos */}
              {area.strArea === 'British' && 'ğŸ‡¬ğŸ‡§'}       {/* Reino Unido */}
              {area.strArea === 'Canadian' && 'ğŸ‡¨ğŸ‡¦'}      {/* CanadÃ¡ */}
              {area.strArea === 'Chinese' && 'ğŸ‡¨ğŸ‡³'}       {/* China */}
              {area.strArea === 'Croatian' && 'ğŸ‡­ğŸ‡·'}      {/* Croacia */}
              {area.strArea === 'Dutch' && 'ğŸ‡³ğŸ‡±'}         {/* Holanda */}
              {area.strArea === 'Egyptian' && 'ğŸ‡ªğŸ‡¬'}      {/* Egipto */}
              {area.strArea === 'Filipino' && 'ğŸ‡µğŸ‡­'}      {/* Filipinas */}
              {area.strArea === 'French' && 'ğŸ‡«ğŸ‡·'}        {/* Francia */}
              {area.strArea === 'Greek' && 'ğŸ‡¬ğŸ‡·'}         {/* Grecia */}
              {area.strArea === 'Indian' && 'ğŸ‡®ğŸ‡³'}        {/* India */}
              {area.strArea === 'Irish' && 'ğŸ‡®ğŸ‡ª'}         {/* Irlanda */}
              {area.strArea === 'Italian' && 'ğŸ‡®ğŸ‡¹'}       {/* Italia */}
              {area.strArea === 'Jamaican' && 'ğŸ‡¯ğŸ‡²'}      {/* Jamaica */}
              {area.strArea === 'Japanese' && 'ğŸ‡¯ğŸ‡µ'}      {/* JapÃ³n */}
              {area.strArea === 'Kenyan' && 'ğŸ‡°ğŸ‡ª'}        {/* Kenia */}
              {area.strArea === 'Malaysian' && 'ğŸ‡²ğŸ‡¾'}     {/* Malasia */}
              {area.strArea === 'Mexican' && 'ğŸ‡²ğŸ‡½'}       {/* MÃ©xico */}
              {area.strArea === 'Moroccan' && 'ğŸ‡²ğŸ‡¦'}      {/* Marruecos */}
              {area.strArea === 'Polish' && 'ğŸ‡µğŸ‡±'}        {/* Polonia */}
              {area.strArea === 'Portuguese' && 'ğŸ‡µğŸ‡¹'}    {/* Portugal */}
              {area.strArea === 'Russian' && 'ğŸ‡·ğŸ‡º'}       {/* Rusia */}
              {area.strArea === 'Spanish' && 'ğŸ‡ªğŸ‡¸'}       {/* EspaÃ±a */}
              {area.strArea === 'Thai' && 'ğŸ‡¹ğŸ‡­'}          {/* Tailandia */}
              {area.strArea === 'Tunisian' && 'ğŸ‡¹ğŸ‡³'}      {/* TÃºnez */}
              {area.strArea === 'Turkish' && 'ğŸ‡¹ğŸ‡·'}       {/* TurquÃ­a */}
              {area.strArea === 'Ukrainian' && 'ğŸ‡ºğŸ‡¦'}     {/* Ucrania */}
              {area.strArea === 'Uruguayan' && 'ğŸ‡ºğŸ‡¾'}     {/* Uruguay */}
              {area.strArea === 'Vietnamese' && 'ğŸ‡»ğŸ‡³'}    {/* Vietnam */}
              {/* Si el paÃ­s no tiene bandera especÃ­fica, mostramos un emoji genÃ©rico de comida */}
              {!['American', 'British', 'Canadian', 'Chinese', 'Croatian', 'Dutch', 'Egyptian', 'Filipino', 'French', 'Greek', 'Indian', 'Irish', 'Italian', 'Jamaican', 'Japanese', 'Kenyan', 'Malaysian', 'Mexican', 'Moroccan', 'Polish', 'Portuguese', 'Russian', 'Spanish', 'Thai', 'Tunisian', 'Turkish', 'Ukrainian', 'Uruguayan', 'Vietnamese'].includes(area.strArea) && 'ğŸ½ï¸'}
            </div>
            <!-- Nombre del paÃ­s traducido al espaÃ±ol -->
            <!-- Si no hay traducciÃ³n disponible, muestra el nombre original en inglÃ©s -->
            <h3 class="text-xl font-semibold text-gray-800 group-hover:text-blue-600 transition-colors">
              {countryTranslations[area.strArea] || area.strArea}
            </h3>
            <!-- Texto descriptivo que indica que es una cocina de ese paÃ­s -->
            <p class="text-sm text-gray-500 mt-2">
              Cocina {countryTranslations[area.strArea] || area.strArea}
            </p>
          </div>
        </a>
      ))}
    </div>
  </div>
</Layout>
